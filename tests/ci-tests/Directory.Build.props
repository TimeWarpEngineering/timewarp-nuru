<Project>
  <Import Project="$([MSBuild]::GetPathOfFileAbove('Directory.Build.props', '$(MSBuildThisFileDirectory)../'))" />
  <PropertyGroup>
    <DefineConstants>$(DefineConstants);JARIBU_MULTI</DefineConstants>
    <!-- Enable AOT-compatible configuration binding for IOptions<T> tests -->
    <EnableConfigurationBindingGenerator>true</EnableConfigurationBindingGenerator>
    <!-- Suppress unused parameter warnings in test lambdas -->
    <!-- Suppress namespace style warnings for tests with top-level statements + namespace blocks -->
    <NoWarn>$(NoWarn);RCS1163;IDE0161;IDE0065</NoWarn>
  </PropertyGroup>
  <ItemGroup>
    <!-- Core tests - lexer (migrated) -->
    <Compile Include="../timewarp-nuru-tests/lexer/*.cs" />
    <!-- Core tests - generator (Jaribu format tests that support JARIBU_MULTI) -->
    <!-- Tests 01, 10, 11, 12 have guards that skip entry point in multi-mode -->
    <Compile Include="../timewarp-nuru-tests/generator/generator-01-intercept.cs" />
    <Compile Include="../timewarp-nuru-tests/generator/generator-10-required-options.cs" />
    <Compile Include="../timewarp-nuru-tests/generator/generator-11-attributed-routes.cs" />
    <Compile Include="../timewarp-nuru-tests/generator/generator-12-method-reference-handlers.cs" />
    <Compile Include="../timewarp-nuru-tests/generator/generator-14-options-validation.cs" />
    <Compile Include="../timewarp-nuru-tests/generator/generator-04-static-service-injection.cs" />
    <Compile Include="../timewarp-nuru-tests/generator/generator-13-ioptions-parameter-injection.cs" />
    <!-- Core tests - migrated files -->

    <!-- TimeWarp.Terminal widget/utils tests have been moved to that repo -->

    <!-- DISABLED: These tests use old APIs (HelpProvider.GetHelpText, CreateSlimBuilder, SessionContext, InvokerRegistry) -->
    <!-- <Compile Include="../timewarp-nuru-tests/help-provider-01-option-detection.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-tests/help-provider-02-filtering.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-tests/help-provider-03-session-context.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-tests/help-provider-04-default-route.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-tests/help-provider-05-color-output.cs" /> -->
    
    <!-- <Compile Include="../timewarp-nuru-tests/invoker-registry-01-basic.cs" /> -->
    <!-- Message type tests -->
    <Compile Include="../timewarp-nuru-tests/message-type/*.cs" />
    <!-- <Compile Include="../timewarp-nuru-tests/message-type-02-help-output.cs" /> -->
    <!-- TODO: Create or restore route-builder-01-basic.cs -->
    <!-- <Compile Include="../timewarp-nuru-tests/route-builder-01-basic.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-tests/test-terminal-context-01-basic.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-tests/compiled-route-test-helper.cs" /> -->
    <!-- Parser tests (migrated) -->
    <Compile Include="../timewarp-nuru-tests/parser/*.cs" />
    <!-- Routing tests (migrated) -->
    <Compile Include="../timewarp-nuru-tests/routing/*.cs" />
    <!-- Configuration tests -->
    <Compile Include="../timewarp-nuru-tests/configuration/configuration-01-validate-on-start.cs" />
    <Compile Include="../timewarp-nuru-tests/configuration/configuration-02-cli-overrides.cs" />
    <!-- Factory tests - excluded from multi-mode -->
    <!-- <Compile Include="../timewarp-nuru-tests/factory/*.cs" /> -->
    <!-- Options tests (migrated) -->
    <Compile Include="../timewarp-nuru-tests/options/options-01-mixed-required-optional.cs" />
    <Compile Include="../timewarp-nuru-tests/options/options-02-optional-flag-optional-value.cs" />
    <!-- Session tests -->
    <Compile Include="../timewarp-nuru-tests/session/session-context-01-basic.cs" />
    <!-- Help tests (per-route help, Task #356) -->
    <Compile Include="../timewarp-nuru-tests/help/*.cs" />
    <!-- Capabilities tests (task #157 - route not yet implemented) -->
    <Compile Include="../timewarp-nuru-tests/capabilities/*.cs" />
    <!-- Type conversion tests (migrated) -->
    <Compile Include="../timewarp-nuru-tests/type-conversion/*.cs" />
    <!-- REPL tests (Phase 3 of #362) -->
    <!-- NOTE: Many REPL integration tests fail because key bindings and advanced features -->
    <!-- aren't fully connected in the new source generator architecture. Only stable tests included. -->
    <!-- Stable REPL tests: session lifecycle, history, console input, tab completion, builtin commands -->
    <Compile Include="../timewarp-nuru-tests/repl/repl-01-session-lifecycle.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-03-history-management.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-03b-history-security.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-04-history-persistence.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-05-console-input.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-06-tab-completion-basic.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-07-tab-completion-advanced.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-08-syntax-highlighting.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-09-builtin-commands.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-13-nuruapp-integration.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-14-performance.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-15-edge-cases.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-20-double-tab-bug.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-21-escape-clears-line.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-22-prompt-display-no-arrow-history.cs" />
    <!-- Additional REPL tests (Phase 4 of #362) -->
    <Compile Include="../timewarp-nuru-tests/repl/repl-02-command-parsing.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-10-error-handling.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-11-display-formatting.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-12-configuration.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-17-sample-validation.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-18-psreadline-keybindings.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-19-tab-cycling-bug.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-23-key-binding-profiles.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-24-custom-key-bindings.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-25-interactive-history-search.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-26-kill-ring.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-27-undo-redo.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-28-text-selection.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-29-word-operations.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-30-basic-editing-enhancement.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-31-multiline-buffer.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-33-yank-arguments.cs" />
    <!-- Skipped tests (placeholder files) -->
    <Compile Include="../timewarp-nuru-tests/repl/repl-16-enum-completion.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-32-multiline-editing.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-34-interactive-route-alias.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-35-interactive-route-execution.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-36-run-repl-async-inline.cs" />
    <Compile Include="../timewarp-nuru-tests/repl/repl-37-quoted-strings.cs" />
    <!-- Command-line parser tests in subdirectory -->
    <Compile Include="../timewarp-nuru-tests/repl/command-line-parser/*.cs" />
    <!-- Completion tests - static (migrated) -->
    <!-- <Compile Include="../timewarp-nuru-tests/completion/static/*.cs" /> -->
    <!-- Completion tests - dynamic (migrated) -->
    <!-- <Compile Include="../timewarp-nuru-tests/completion/dynamic/*.cs" /> -->
    <!-- Completion tests - engine (migrated) -->
    <!-- <Compile Include="../timewarp-nuru-tests/completion/engine/*.cs" /> -->
    <!-- All REPL tests (recursive glob includes subfolders, excludes obj/bin) -->
    <!-- <Compile Include="../timewarp-nuru-repl-tests/**/*.cs" Exclude="../timewarp-nuru-repl-tests/obj/**;../timewarp-nuru-repl-tests/bin/**" /> -->
    <!-- MCP tests (migrated) -->
    <!-- <Compile Include="../timewarp-nuru-mcp-tests/*.cs" /> -->
  </ItemGroup>
  <ItemGroup>
    <!-- <ProjectReference Include="$(MSBuildThisFileDirectory)../../source/timewarp-nuru-completion/timewarp-nuru-completion.csproj" /> -->
    <!-- <ProjectReference Include="$(MSBuildThisFileDirectory)../../source/timewarp-nuru-repl/timewarp-nuru-repl.csproj" /> -->
    <!-- <ProjectReference Include="$(MSBuildThisFileDirectory)../../source/timewarp-nuru-mcp/timewarp-nuru-mcp.csproj" /> -->
  </ItemGroup>

  <ItemGroup>
    <Using Include="TimeWarp.Nuru.Tests.LexerTests.LexerTestHelper" Static="true" />
    <!-- Global usings for migrated test files -->
    <Using Include="TimeWarp.Nuru" />
    <Using Include="Shouldly" />
    <Using Include="System.ComponentModel.DataAnnotations" />
    <Using Include="Microsoft.Extensions.DependencyInjection" />
    <Using Include="Microsoft.Extensions.Options" />
    <Using Include="Microsoft.Extensions.Configuration" />
    <Using Include="System.Net" />
    <!-- MCP tools namespace -->
    <!-- <Using Include="TimeWarp.Nuru.Mcp.Tools" /> -->
  </ItemGroup>

  <ItemGroup>
    <!-- Packages for configuration tests -->
    <PackageReference Include="Microsoft.Extensions.Options.DataAnnotations" />
  </ItemGroup>
</Project>
