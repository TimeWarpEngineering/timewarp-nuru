# Address sample compilation warnings

## Description

Many samples produce compilation warnings that should be investigated and resolved. These may indicate configuration issues or areas needing attention.

## Checklist

- [x] Add source generator emit to samples/Directory.Build.props for debugging
- [ ] Investigate `MSG0005: MediatorGenerator found message without any registered handler: Default_Generated_Query` - appears in ~25 samples
- [ ] Investigate `CS0436` type conflict warnings in aot-example (Default_Generated_Query defined in both generated code and library)
- [ ] Investigate `CS8785: Generator 'NuruRouteAnalyzer' failed to generate source` - FileNotFoundException for Microsoft.Extensions.Logging.Abstractions

## Notes

### Root Cause Analysis (completed)

The `Default_Generated_Query` without a handler is generated by the `timewarp-nuru` library itself due to two bugs in `NuruDelegateCommandGenerator`:

**Bug 1: Pattern naming issue**
- The `--capabilities` route pattern starts with `-`
- `GenerateClassName` in `nuru-delegate-command-generator.route-parsing.cs:179` breaks on `-` or `{`
- Result: `literals.Count == 0` → returns `"Default_Generated_Query"` instead of `"Capabilities_Generated_Query"`

**Bug 2: Class generated without handler**
- The handler `DisplayCapabilitiesAsync` is a **method group**, not a lambda
- `ExtractHandlerInfo` in `nuru-delegate-command-generator.handler.cs:19` returns `null` for non-lambda handlers
- But `ExtractCommandInfo` still creates `DelegateCommandInfo` with `Handler: null`
- Codegen emits the class WITHOUT a nested Handler class
- Mediator sees `IQuery<Unit>` with no `IQueryHandler` → MSG0005

**Location of source:**
- `source/timewarp-nuru/nuru-app-builder-extensions.capabilities.cs:43-47`
```csharp
builder.Map("--capabilities")
  .WithHandler(DisplayCapabilitiesAsync)  // method group, not lambda
  .WithDescription("Display machine-readable metadata for AI tool discovery")
  .AsQuery()
  .Done();
```

### Blocked By

**Task 234** - Add provenance comments to generated delegate commands. Once we have provenance in the generated output, we can clearly see what's being generated and fix the issues.

### Proposed Fixes (after task 234)

1. **Don't emit classes without handlers** - If `handlerInfo is null`, return `null` from `ExtractCommandInfo`

2. **Fix pattern naming for option-only patterns** - `"--capabilities"` should extract `"capabilities"` as the class name prefix

3. **Investigate CS8785** - Assembly loading issue with Microsoft.Extensions.Logging.Abstractions v10.0.0

### Files to Modify

- `source/timewarp-nuru-analyzers/analyzers/nuru-delegate-command-generator.cs`
- `source/timewarp-nuru-analyzers/analyzers/nuru-delegate-command-generator.route-parsing.cs`
