# #293.1: Convert EndpointBuilder Methods to No-Ops

## Parent

#293 Make DSL Builder Methods No-Ops

## Description

Convert `EndpointBuilder<TBuilder>` methods from doing runtime work (storing handler, description, message type on `Endpoint` object) to no-ops that just return `this` for fluent chaining.

**Key change:** Remove the `_endpoint` field entirely. The builder becomes a shell that only exists for DSL compilation.

## File

`source/timewarp-nuru-core/builders/endpoint-builder.cs`

## Checklist

### Constructor Changes
- [ ] Remove `Endpoint endpoint` parameter from constructor
- [ ] Remove `_endpoint` private field
- [ ] Keep only `_builder` reference for `Done()` navigation

### Method Conversions
- [ ] `WithHandler(Delegate)` → return `this` (line 64-70)
- [ ] `WithDescription(string)` → return `this` (line 86-90)
- [ ] `AsQuery()` → return `this` (line 100-105)
- [ ] `AsCommand()` → return `this` (line 116-121)
- [ ] `AsIdempotentCommand()` → return `this` (line 132-137)
- [ ] `Done()` → keep as-is (already just returns `_builder`)

### Forwarding Methods (keep as-is)
- [ ] `Map(string pattern)` → forwards to `_builder.Map()`
- [ ] `Map<TCommand>(pattern)` → forwards to `_builder.Map<TCommand>()`
- [ ] `Map<TCommand,TResponse>(pattern)` → forwards to `_builder.Map<TCommand,TResponse>()`

### Cleanup
- [ ] Add comment explaining source gen handles actual work
- [ ] Remove unused `using` statements if any

## Current Implementation

```csharp
public class EndpointBuilder<TBuilder>(TBuilder builder, Endpoint endpoint)
  where TBuilder : class
{
  private readonly TBuilder _builder = builder;
  private readonly Endpoint _endpoint = endpoint;

  public EndpointBuilder<TBuilder> WithHandler(Delegate handler)
  {
    ArgumentNullException.ThrowIfNull(handler);
    _endpoint.Handler = handler;
    _endpoint.Method = handler.Method;
    return this;
  }
  // ... more methods that modify _endpoint
}
```

## Target Implementation

```csharp
/// <summary>
/// Fluent builder for configuring route endpoints.
/// This is a compile-time DSL shell - the source generator extracts configuration
/// at build time. Runtime methods are no-ops that maintain the fluent chain.
/// </summary>
public class EndpointBuilder<TBuilder>(TBuilder builder)
  where TBuilder : class
{
  private readonly TBuilder _builder = builder;

  public EndpointBuilder<TBuilder> WithHandler(Delegate handler)
  {
    // Source generator extracts handler at compile time
    _ = handler; // Suppress unused parameter warning
    return this;
  }

  public EndpointBuilder<TBuilder> WithDescription(string description)
  {
    // Source generator extracts description at compile time
    _ = description;
    return this;
  }

  public EndpointBuilder<TBuilder> AsQuery() => this;
  public EndpointBuilder<TBuilder> AsCommand() => this;
  public EndpointBuilder<TBuilder> AsIdempotentCommand() => this;

  public TBuilder Done() => _builder;
  // ... forwarding methods unchanged
}
```

## Breaking Change

This changes the constructor signature from `EndpointBuilder(TBuilder, Endpoint)` to `EndpointBuilder(TBuilder)`.

**Impact:** Only affects `NuruCoreAppBuilder.Map()` methods which create `EndpointBuilder` instances. Those will be updated in #293.3.

**Workaround for incremental work:** Can temporarily add a second constructor that ignores the `Endpoint` parameter:
```csharp
public EndpointBuilder(TBuilder builder, Endpoint? _) : this(builder) { }
```
Remove this workaround in #293.6 when deleting dead code.

## Notes

- The `Endpoint` class will become dead code after this change
- Keep the forwarding `Map()` methods - they allow chaining from endpoint back to builder
- `Done()` is already effectively a no-op (just navigation)
