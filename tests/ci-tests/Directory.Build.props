<Project>
  <Import Project="$([MSBuild]::GetPathOfFileAbove('Directory.Build.props', '$(MSBuildThisFileDirectory)../'))" />
  <PropertyGroup>
    <DefineConstants>$(DefineConstants);JARIBU_MULTI</DefineConstants>
    <!-- Suppress unused parameter warnings in test lambdas -->
    <!-- Suppress namespace style warnings for tests with top-level statements + namespace blocks -->
    <NoWarn>$(NoWarn);RCS1163;IDE0161;IDE0065</NoWarn>
  </PropertyGroup>
  <ItemGroup>
    <!-- Core tests - lexer (migrated) -->
    <Compile Include="../timewarp-nuru-core-tests/lexer/*.cs" />
    <!-- Core tests - generator (Jaribu format tests that support JARIBU_MULTI) -->
    <!-- Tests 01, 10, 11, 12 have guards that skip entry point in multi-mode -->
    <Compile Include="../timewarp-nuru-core-tests/generator/generator-01-intercept.cs" />
    <Compile Include="../timewarp-nuru-core-tests/generator/generator-10-required-options.cs" />
    <Compile Include="../timewarp-nuru-core-tests/generator/generator-11-attributed-routes.cs" />
    <Compile Include="../timewarp-nuru-core-tests/generator/generator-12-method-reference-handlers.cs" />
    <!-- EXCLUDED from CI multi-mode (must run in isolation): -->
    <!-- generator-03-short-only-options.cs - reads generated file from path based on runfile name -->
    <!-- generator-04-static-service-injection.cs - reads generated file from path based on runfile name -->
    <!-- generator-13-ioptions-parameter-injection.cs - reads generated file from path based on runfile name -->
    <!-- generator-14-options-validation.cs - top-level return statement conflicts with multi-mode -->
    <!-- Core tests - migrated files -->

    <!-- TimeWarp.Terminal utils tests should be in that repo now not here --> 
    <!-- <Compile Include="../timewarp-nuru-core-tests/ansi-string-utils-01-basic.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/ansi-string-utils-02-wrap-text.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/hyperlink-01-basic.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/panel-widget-01-basic.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/panel-widget-02-terminal-extensions.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/panel-widget-03-word-wrap.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/table-widget-01-basic.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/table-widget-02-borders.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/table-widget-03-styling.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/table-widget-04-expand.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/rule-widget-01-basic.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/rule-widget-02-terminal-extensions.cs" /> -->

    <!-- DISABLED: These tests use old APIs (HelpProvider.GetHelpText, CreateSlimBuilder, SessionContext, InvokerRegistry) -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/help-provider-01-option-detection.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/help-provider-02-filtering.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/help-provider-03-session-context.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/help-provider-04-default-route.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/help-provider-05-color-output.cs" /> -->
    
    <!-- <Compile Include="../timewarp-nuru-core-tests/invoker-registry-01-basic.cs" /> -->
    <Compile Include="../timewarp-nuru-core-tests/message-type-01-fluent-api.cs" />
    <!-- <Compile Include="../timewarp-nuru-core-tests/message-type-02-help-output.cs" /> -->
    <!-- DISABLED: Uses IRequest which no longer exists; NuruRouteRegistry not yet wired into source generator -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/nuru-route-registry-01-basic.cs" /> -->
    <!-- TODO: Create or restore route-builder-01-basic.cs -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/route-builder-01-basic.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/test-terminal-context-01-basic.cs" /> -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/compiled-route-test-helper.cs" /> -->
    <!-- Parser tests (migrated) -->
    <Compile Include="../timewarp-nuru-core-tests/parser/*.cs" />
    <!-- Routing tests - BLOCKED by generator bugs, cannot be included in CI multi-mode -->
    <!-- Bug #347: routing-09 - short-only flags -i -t both generate property name "Option" -->
    <!-- Bug #348: Multiple files - optional positional parameter binding variables not emitted -->
    <!-- Bug #349: Multiple files - typed repeated options not converted from string[] -->
    <!-- Also excluded: routing-08 (UseDebugLogging), routing-15 (AddAutoHelp), routing-20/21 (UseAllExtensions), dsl-example (not a test) -->
    <!-- Run routing tests standalone until bugs are fixed: ./tests/timewarp-nuru-core-tests/routing/routing-XX-*.cs -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/routing/*.cs" /> -->
    <!-- Configuration tests (migrated) - DISABLED: uses AddDependencyInjection() -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/configuration/*.cs" /> -->
    <!-- Factory tests - excluded from multi-mode -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/factory/*.cs" /> -->
    <!-- Options tests (migrated) - DISABLED: uses CreateSlimBuilder() -->
    <!-- <Compile Include="../timewarp-nuru-core-tests/options/*.cs" Exclude="../timewarp-nuru-core-tests/options/options-03-*.cs" /> -->
    <!-- Type conversion tests (migrated) -->
    <Compile Include="../timewarp-nuru-core-tests/type-conversion/*.cs" />
    <!-- Completion tests - static (migrated) -->
    <!-- <Compile Include="../timewarp-nuru-completion-tests/static/*.cs" /> -->
    <!-- Completion tests - dynamic (migrated) -->
    <!-- <Compile Include="../timewarp-nuru-completion-tests/dynamic/*.cs" /> -->
    <!-- Completion tests - engine (migrated) -->
    <!-- <Compile Include="../timewarp-nuru-completion-tests/engine/*.cs" /> -->
    <!-- All REPL tests (recursive glob includes subfolders, excludes obj/bin) -->
    <!-- <Compile Include="../timewarp-nuru-repl-tests/**/*.cs" Exclude="../timewarp-nuru-repl-tests/obj/**;../timewarp-nuru-repl-tests/bin/**" /> -->
    <!-- MCP tests (migrated) -->
    <!-- <Compile Include="../timewarp-nuru-mcp-tests/*.cs" /> -->
  </ItemGroup>
  <ItemGroup>
    <!-- <ProjectReference Include="$(MSBuildThisFileDirectory)../../source/timewarp-nuru-completion/timewarp-nuru-completion.csproj" /> -->
    <!-- <ProjectReference Include="$(MSBuildThisFileDirectory)../../source/timewarp-nuru-repl/timewarp-nuru-repl.csproj" /> -->
    <!-- <ProjectReference Include="$(MSBuildThisFileDirectory)../../source/timewarp-nuru-mcp/timewarp-nuru-mcp.csproj" /> -->
  </ItemGroup>

  <ItemGroup>
    <Using Include="TimeWarp.Nuru.Tests.LexerTests.LexerTestHelper" Static="true" />
    <!-- Global usings for migrated test files -->
    <Using Include="TimeWarp.Nuru" />
    <Using Include="Shouldly" />
    <Using Include="System.ComponentModel.DataAnnotations" />
    <Using Include="Microsoft.Extensions.DependencyInjection" />
    <Using Include="Microsoft.Extensions.Options" />
    <Using Include="System.Net" />
    <!-- MCP tools namespace -->
    <!-- <Using Include="TimeWarp.Nuru.Mcp.Tools" /> -->
  </ItemGroup>

  <ItemGroup>
    <!-- Packages for configuration tests -->
    <PackageReference Include="Microsoft.Extensions.Options.DataAnnotations" />
  </ItemGroup>
</Project>
