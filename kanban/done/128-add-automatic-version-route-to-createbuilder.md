# Add automatic --version route to CreateBuilder

## Description

Add a built-in `--version,-v` route that is automatically registered when using `NuruApp.CreateBuilder()`. This route should display version information including commit hash and date when available (via TimeWarp.Build.Tasks). The route should NOT be added for `CreateSlimBuilder` or `CreateEmptyBuilder` to maintain their minimal/AOT-focused design.

## Requirements

1. **Add version route in `UseAllExtensions()`** (`source/timewarp-nuru/nuru-app-builder-extensions.cs`)
   - Register `--version,-v` route that displays:
     - Assembly informational version (or simple version as fallback)
     - Commit hash (if available from `AssemblyMetadataAttribute` with key "CommitHash")
     - Commit date (if available from `AssemblyMetadataAttribute` with key "CommitDate")
   - Only added when `CreateBuilder()` is used (not Slim/Empty)

2. **Add disable option to `NuruAppOptions`** (`source/timewarp-nuru/nuru-app-options.cs`)
   - Add `bool DisableVersionRoute { get; set; }` property (default false)
   - Document that setting to `true` prevents auto-registration of `--version` route

3. **Add transitive TimeWarp.Build.Tasks dependency** (`source/timewarp-nuru/timewarp-nuru.csproj`)
   - Add `<PackageReference Update="TimeWarp.Build.Tasks" PrivateAssets="none" />` 
   - This automatically injects commit hash/date into user assemblies at build time

4. **AOT Compatibility**
   - Using `Assembly.GetCustomAttributes<AssemblyMetadataAttribute>()` is AOT-safe (metadata baked at compile time)
   - No dynamic type instantiation required

5. **Source Generator Compatibility**
   - Use `Action` (void return) for `DisplayVersion` handler instead of `Func<int>`
   - The `NoParams` invoker signature is commonly generated by consuming apps
   - This avoids needing a special invoker just for the version route
   - Use `builder.Map()` normally - no workarounds needed

6. **Tests**
   - Add test verifying `--version` route is registered by `CreateBuilder()`
   - Add test verifying `--version` route is NOT registered by `CreateSlimBuilder()`
   - Add test verifying `DisableVersionRoute = true` prevents registration

## Checklist

### Implementation
- [x] Add `DisableVersionRoute` property to `NuruAppOptions`
- [x] Add version route registration in `UseAllExtensions()`
- [x] Add TimeWarp.Build.Tasks package reference with `PrivateAssets="none"`
- [x] Implement version output handler using `Assembly.GetEntryAssembly()`
- [x] Change `DisplayVersion` to return `void` (Action) instead of `int` (Func<int>)
- [x] Use `builder.Map()` normally (source generator suppression handles conflicts)
- [x] Add `SuppressNuruInvokerGenerationAttribute` to timewarp-nuru-core
- [x] Modify `NuruInvokerGenerator` to check for suppress attribute
- [x] Add `[assembly: SuppressNuruInvokerGeneration]` to TimeWarp.Nuru

### Testing
- [x] Test `--version` route is registered by `CreateBuilder()`
- [x] Test `--version` route is NOT registered by `CreateSlimBuilder()`
- [x] Test `DisableVersionRoute = true` prevents registration
- [x] Test `AddVersionRoute()` can be called manually on slim builder

### Documentation
- [x] Document the `--version` route in user documentation
- [x] Document `DisableVersionRoute` option

## Notes

- The version route prints to stdout and returns exit code 0 (like `git --version`)
- Use `Assembly.GetEntryAssembly()` to get the user's application assembly (not Nuru's assembly)
- Format output simply: version on first line, optional commit info on subsequent lines
- `AssemblyMetadataAttribute` lookup is AOT-safe since metadata is baked at compile time

## Source Generator Issue (Resolved)

**Problem:** Calling `builder.Map()` in library code triggers the `NuruInvokerGenerator` source generator to create a `GeneratedRouteInvokers` class in `TimeWarp.Nuru.dll`. When consuming apps also call `Map()`, they generate their own `GeneratedRouteInvokers`, causing CS0436 conflicts.

**Solution:** Use `Action` (void return) for the handler. The `NoParams` invoker signature is so common that virtually every consuming app will generate it anyway. The invoker from the consuming app's generated code will be used, avoiding the conflict.
